openapi: 3.0.1
info:
  title: "An external API which only provides you with this document"
  version: 1.0.0

paths:
  /mails:
    post:
      operationId: postMail
      requestBody:
        $ref: "#/components/requestBodies/PostMailRequest"
      responses:
        201:
          $ref: "#/components/responses/PostMailResponse"
        400:
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Problem"
        401:
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Problem"
        403:
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Problem"
        404:
          description: Not Found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Problem"

components:
  requestBodies:
    PostMailRequest:
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/NewMail"

  responses:
    PostMailResponse:
      description: "The successfully created and sent mail"
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Mail"
  schemas:
    NewMail:
      properties:
        recipient:
          type: string
          example: "recipient@example.org"
        body:
          type: string
          example: "Hello World!"

    Mail:
      properties:
        status:
          enum:
            - draft
            - pending
            - sent
            - received
            - read
          example: "read"
        recipient:
          type: string
          example: "recipient@example.org"
        body:
          type: string
          example: "Hello World!"

    Problem:
      description: A Problem Details object (RFC 9457)
      type: object
      properties:
        type:
          type: string
          format: uri
          description: An absolute URI that identifies the problem type
          default: about:blank  # kept for backwards-compatibility, type will be mandatory in problem-v2
        href:
          type: string
          format: uri
          description: An absolute URI that, when dereferenced, provides human-readable documentation for the problem type (e.g. using HTML).
        title:
          type: string
          description: A short summary of the problem type. Written in English and readable for engineers (usually not suited for non technical stakeholders and not localized).
          example: Service Unavailable
        status:
          type: integer
          format: int32
          description: The HTTP status code generated by the origin server for this occurrence of the problem.
          minimum: 400
          maximum: 600
          exclusiveMaximum: true
          example: 503
        detail:
          type: string
          description: A human-readable explanation specific to this occurrence of the problem
        instance:
          type: string
          format: uri
          description: An absolute URI that identifies the specific occurrence of the problem. It may or may not yield further information if dereferenced.
      example:
        {
          "type": "urn:problem-type:openapitools:payloadTooLarge",
          "href": "https://www.openapitools.org/specification/rest/api-guide/problems/payloadTooLarge.html", # location of linked doc will change in the future to recommended URI structure
          "title": "Payload Too Large",
          "status": 413,
          "detail": "Request message must not be larger than 10 MB",
          "instance": "urn:uuid:123e4567-e89b-12d3-a456-426614174000",
          "limit": 10485760  # additional properties specific to the problem type are allowed
        }